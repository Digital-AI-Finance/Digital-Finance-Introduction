{
  "lesson": "NB09",
  "title": "AMM Simulation Quiz",
  "questions": [
    {
      "id": 1,
      "question": "What is the fundamental difference between traditional order books and AMMs?",
      "options": {
        "A": "Order books use algorithms while AMMs use human traders",
        "B": "Order books match discrete bid/ask orders while AMMs use mathematical formulas to price trades against liquidity pools",
        "C": "Order books are decentralized while AMMs are centralized",
        "D": "Order books require more gas fees while AMMs are free to use"
      },
      "correct": "B",
      "explanation": "Traditional exchanges use order books where discrete bid and ask orders are matched when bid >= ask. AMMs replace this with liquidity pools and mathematical formulas (like x * y = k) that automatically determine prices. This eliminates the need for counterparties and enables instant trading against the pool itself.",
      "difficulty": "easy"
    },
    {
      "id": 2,
      "question": "What is a liquidity pool in the context of AMMs?",
      "options": {
        "A": "A database storing all pending trades waiting to be executed",
        "B": "A smart contract holding reserves of two tokens that traders can swap against using a pricing formula",
        "C": "A group of traders who manually set prices for token pairs",
        "D": "A backup storage system for blockchain data"
      },
      "correct": "B",
      "explanation": "A liquidity pool is a smart contract that holds reserves of two tokens (e.g., ETH and USDC). Liquidity providers deposit token pairs, and traders can swap against these reserves. The constant product formula (x * y = k) determines the exchange rate based on the pool's reserve ratios.",
      "difficulty": "easy"
    },
    {
      "id": 3,
      "question": "In the constant product formula $x \\cdot y = k$, what does $k$ represent?",
      "options": {
        "A": "The current market price of token X",
        "B": "The total trading fees accumulated",
        "C": "The invariant that remains constant after any swap (the product of reserves)",
        "D": "The liquidity provider's profit margin"
      },
      "correct": "C",
      "explanation": "The constant $k$ is the product of the two token reserves (x * y) and serves as the invariant that must remain constant after any trade. When someone swaps tokens, the reserves adjust such that their product stays equal to $k$. This mathematical constraint is what creates the AMM's pricing curve.",
      "difficulty": "easy"
    },
    {
      "id": 4,
      "question": "How is the spot price of token X derived from the constant product formula?",
      "options": {
        "A": "Spot price = $k / x$",
        "B": "Spot price = $y / x$ (the ratio of reserves)",
        "C": "Spot price = $x \\cdot y$",
        "D": "Spot price = $(x + y) / 2$"
      },
      "correct": "B",
      "explanation": "The spot price of token X in terms of token Y is calculated as $y/x$, the ratio of the reserves. This represents the instantaneous exchange rate for infinitesimally small trades. For example, if a pool has 100 ETH and 200,000 USDC, the spot price is 200,000/100 = 2,000 USDC per ETH.",
      "difficulty": "medium"
    },
    {
      "id": 5,
      "question": "What is price impact (slippage) in AMM swaps?",
      "options": {
        "A": "The difference between the spot price before the trade and the effective price actually received",
        "B": "The transaction fee charged by the blockchain",
        "C": "The time delay between submitting and executing a trade",
        "D": "The difference between AMM price and centralized exchange price"
      },
      "correct": "A",
      "explanation": "Price impact (or slippage) is the difference between the spot price at the start of a trade and the effective price you actually get. When you trade, you move along the bonding curve, changing the reserve ratio and thus the price. Larger trades have more price impact because they shift the curve more significantly.",
      "difficulty": "medium"
    },
    {
      "id": 6,
      "question": "Why do larger trades experience more slippage in AMMs?",
      "options": {
        "A": "Larger trades pay higher percentage fees to the protocol",
        "B": "Larger trades require more computational power to execute",
        "C": "Larger trades shift the reserve ratio more dramatically, causing greater price movement along the bonding curve",
        "D": "Larger trades are automatically split into smaller pieces with cumulative fees"
      },
      "correct": "C",
      "explanation": "Slippage grows non-linearly with trade size because larger trades cause bigger shifts in the reserve ratio. The constant product formula (x * y = k) creates a hyperbolic curve where price changes accelerate as reserves become more imbalanced. A trade that's 10% of the pool will have much more than 10x the slippage of a 1% trade.",
      "difficulty": "medium"
    },
    {
      "id": 7,
      "question": "What is the purpose of LP (Liquidity Provider) tokens?",
      "options": {
        "A": "They are used to pay transaction fees on the network",
        "B": "They represent ownership share in the liquidity pool and can be redeemed for a proportional share of reserves plus accumulated fees",
        "C": "They give voting rights in the protocol's governance decisions only",
        "D": "They are reward tokens with no relationship to pool deposits"
      },
      "correct": "B",
      "explanation": "LP tokens are minted when you provide liquidity and represent your proportional ownership of the pool. When you want to withdraw, you burn your LP tokens to receive your share of the pool reserves (which now includes your portion of all trading fees accumulated since you deposited). For the first deposit, LP tokens equal sqrt(x * y); subsequent deposits receive LP tokens proportional to their contribution.",
      "difficulty": "easy"
    },
    {
      "id": 8,
      "question": "If a pool has 1,000 total LP tokens and you hold 100 LP tokens, how much of the pool do you own?",
      "options": {
        "A": "100 tokens worth of value",
        "B": "10% of both token reserves plus accumulated fees",
        "C": "You own 100 units of the more valuable token only",
        "D": "The calculation requires knowing the k constant"
      },
      "correct": "B",
      "explanation": "Your LP tokens represent a proportional share of the entire pool. Holding 100 out of 1,000 total LP tokens means you own 10% of the pool. When you redeem these tokens, you receive 10% of the current ETH reserves, 10% of the current USDC reserves, and 10% of all fees that have accumulated in the pool since you deposited.",
      "difficulty": "easy"
    },
    {
      "id": 9,
      "question": "What is impermanent loss?",
      "options": {
        "A": "Transaction fees that LPs must pay when depositing liquidity",
        "B": "The opportunity cost of providing liquidity versus simply holding the tokens when prices diverge from the initial ratio",
        "C": "Temporary network congestion that delays withdrawals",
        "D": "The risk of smart contract bugs causing loss of funds"
      },
      "correct": "B",
      "explanation": "Impermanent loss is the difference in value between providing liquidity versus just holding the tokens. When prices change from the initial ratio, arbitrageurs rebalance the pool, leaving LPs with more of the depreciating token and less of the appreciating token. This is always worse than simply holding both tokens in their original amounts.",
      "difficulty": "medium"
    },
    {
      "id": 10,
      "question": "What is the mathematical formula for impermanent loss given a price ratio $r = \\frac{new\\_price}{initial\\_price}$?",
      "options": {
        "A": "$IL = r - 1$",
        "B": "$IL = \\frac{2\\sqrt{r}}{1 + r} - 1$",
        "C": "$IL = \\frac{r^2 - 1}{r + 1}$",
        "D": "$IL = \\sqrt{r} - 1$"
      },
      "correct": "B",
      "explanation": "The impermanent loss formula is $IL = \\frac{2\\sqrt{r}}{1 + r} - 1$, where $r$ is the price ratio (new_price/initial_price). This formula captures how the pool's value evolves compared to holding. For example, a 2x price increase (r=2) results in about 5.7% IL, while a 50% price increase (r=1.5) results in about 2% IL.",
      "difficulty": "hard"
    },
    {
      "id": 11,
      "question": "Under what condition does impermanent loss become permanent?",
      "options": {
        "A": "When trading volume exceeds a certain threshold",
        "B": "When you withdraw your liquidity at a different price ratio than when you deposited",
        "C": "After 30 days of providing liquidity",
        "D": "When the pool's k constant changes"
      },
      "correct": "B",
      "explanation": "Impermanent loss becomes permanent loss when you withdraw your liquidity. If you withdraw at a different price ratio than when you deposited, you lock in the loss. However, if prices return to the original ratio before you withdraw, the loss disappears—hence \"impermanent.\" The loss only materializes upon withdrawal at divergent prices.",
      "difficulty": "medium"
    },
    {
      "id": 12,
      "question": "Why is impermanent loss called \"impermanent\"?",
      "options": {
        "A": "Because it only affects small liquidity providers, not large ones",
        "B": "Because trading fees eventually compensate for the loss",
        "C": "Because if the price ratio returns to its initial value, the loss disappears",
        "D": "Because it's calculated using temporary market prices"
      },
      "correct": "C",
      "explanation": "Impermanent loss is \"impermanent\" because it can reverse. If the token price ratio returns to what it was when you initially deposited liquidity, the impermanent loss goes back to zero. The loss only exists while prices are diverged from the initial ratio and only becomes permanent if you withdraw at divergent prices.",
      "difficulty": "easy"
    },
    {
      "id": 13,
      "question": "What role does arbitrage play in AMMs?",
      "options": {
        "A": "Arbitrageurs steal fees from liquidity providers",
        "B": "Arbitrageurs keep AMM prices aligned with external markets by profiting from price discrepancies",
        "C": "Arbitrageurs provide the initial liquidity for new pools",
        "D": "Arbitrageurs validate transactions on the blockchain"
      },
      "correct": "B",
      "explanation": "Arbitrageurs provide the crucial service of keeping AMM prices aligned with external market prices. When an AMM's price differs from the broader market, arbitrageurs can buy cheap/sell expensive, profiting from the discrepancy while simultaneously correcting the AMM's price. This is how AMMs achieve price discovery without oracles.",
      "difficulty": "medium"
    },
    {
      "id": 14,
      "question": "How does arbitrage maintain price alignment between AMMs and external markets?",
      "options": {
        "A": "Arbitrageurs vote on price adjustments through governance mechanisms",
        "B": "Smart contracts automatically sync prices with centralized exchanges",
        "C": "When AMM price differs from market price, arbitrageurs trade to profit, which moves the AMM price toward the market price",
        "D": "Oracles feed external prices directly into the AMM contract"
      },
      "correct": "C",
      "explanation": "Arbitrage is self-correcting: if the AMM price is too high, arbitrageurs sell to the AMM (pushing price down); if too low, they buy from the AMM (pushing price up). Each arbitrage trade moves the reserves and thus the price closer to the external market. This continues until the profit opportunity is eliminated and prices align.",
      "difficulty": "medium"
    },
    {
      "id": 15,
      "question": "What is multi-hop swap routing?",
      "options": {
        "A": "Splitting a large trade into multiple smaller trades on the same pool",
        "B": "Trading a token pair that has no direct pool by routing through intermediate tokens (e.g., LINK → ETH → UNI)",
        "C": "Executing trades across multiple blockchain networks simultaneously",
        "D": "A security feature that requires multiple confirmations for large swaps"
      },
      "correct": "B",
      "explanation": "Multi-hop routing enables trading tokens that don't have a direct liquidity pool. For example, to trade LINK for UNI when there's no LINK/UNI pool, you route through an intermediate token like ETH: LINK → ETH → UNI. Each hop incurs fees and price impact, but it enables trading any token pair.",
      "difficulty": "easy"
    },
    {
      "id": 16,
      "question": "How are trading fees calculated in AMM swaps?",
      "options": {
        "A": "Fees are a fixed dollar amount regardless of trade size",
        "B": "Fees are a percentage of the input amount (e.g., 0.3% of amount_in)",
        "C": "Fees are calculated based on the price impact percentage",
        "D": "Fees are only charged on profitable trades"
      },
      "correct": "B",
      "explanation": "AMM fees are typically a fixed percentage of the input amount (e.g., Uniswap V2 charges 0.3%). The formula incorporates fees by adjusting the input: amount_out = (reserve_out * amount_in * (1-fee)) / (reserve_in + amount_in * (1-fee)). This means larger trades pay proportionally more in absolute terms but the same percentage.",
      "difficulty": "medium"
    },
    {
      "id": 17,
      "question": "How do trading fees accrue to LP token holders?",
      "options": {
        "A": "Fees are distributed monthly as separate token rewards",
        "B": "Fees are automatically deposited into LP wallets after each trade",
        "C": "Fees remain in the pool, increasing the reserves, so each LP token represents a growing share of value",
        "D": "Fees must be manually claimed through a governance process"
      },
      "correct": "C",
      "explanation": "Trading fees aren't distributed separately—they stay in the pool as increased reserves. When traders pay the 0.3% fee, those tokens remain in the pool. Since the total number of LP tokens doesn't change but the reserves grow, each LP token now represents a slightly larger share of the pool. You receive your accumulated fees when you withdraw liquidity.",
      "difficulty": "hard"
    },
    {
      "id": 18,
      "question": "What does TVL (Total Value Locked) represent in DeFi protocols?",
      "options": {
        "A": "The total trading volume over the past 24 hours",
        "B": "The total dollar value of all assets deposited in the protocol (e.g., both tokens in all liquidity pools)",
        "C": "The total fees earned by the protocol since inception",
        "D": "The market capitalization of the protocol's governance token"
      },
      "correct": "B",
      "explanation": "TVL is the total dollar value of assets deposited in a protocol. For an AMM, this includes the value of both tokens in all pools. For example, a pool with 1,000 ETH at $2,000 each plus 2,000,000 USDC has a TVL of $4,000,000. Higher TVL generally means deeper liquidity and less slippage for traders.",
      "difficulty": "easy"
    },
    {
      "id": 19,
      "question": "What is a sandwich attack in the context of AMMs?",
      "options": {
        "A": "A network attack that delays transaction processing",
        "B": "An attack where a malicious actor front-runs a victim's trade with a buy, then back-runs with a sell, profiting from the victim's price impact",
        "C": "A smart contract vulnerability that allows draining pool reserves",
        "D": "An attack that splits liquidity across multiple pools to increase slippage"
      },
      "correct": "B",
      "explanation": "In a sandwich attack, an attacker sees a pending large trade in the mempool. They front-run it with their own buy order (pushing price up), let the victim's trade execute at a worse price (pushing price even higher), then back-run with a sell order (profiting from the inflated price). The attacker profits from the victim's price impact.",
      "difficulty": "hard"
    },
    {
      "id": 20,
      "question": "What is concentrated liquidity (introduced in Uniswap V3)?",
      "options": {
        "A": "Requiring all liquidity providers to deposit the same token amounts",
        "B": "Allowing LPs to provide liquidity only within specific price ranges, increasing capital efficiency",
        "C": "Concentrating all liquidity in a single pool per token",
        "D": "A mechanism that prevents large trades from causing price impact"
      },
      "correct": "B",
      "explanation": "Concentrated liquidity (Uniswap V3's innovation) allows LPs to specify a price range for their liquidity instead of spreading it across the entire 0 to infinity curve. For example, you might provide liquidity only between $1,900-$2,100 for ETH. This makes capital much more efficient—your liquidity earns more fees because it's active in the range where most trading occurs. However, you face greater impermanent loss if price moves outside your range.",
      "difficulty": "hard"
    }
  ]
}
