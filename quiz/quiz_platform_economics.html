<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz: Platform Economics Lecture | Introduction to Digital Finance</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <style>
        :root {
            --mlpurple: #3333B2;
            --mlblue: #0066CC;
            --quiz-accent: #14b8a6;
            --quiz-light: #f0fdfa;
            --correct: #22c55e;
            --correct-bg: #dcfce7;
            --incorrect: #ef4444;
            --incorrect-bg: #fee2e2;
            --bg: #f6f8fa;
            --card-bg: #ffffff;
            --text: #24292e;
            --text-secondary: #586069;
            --border: #e1e4e8;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.4;
            min-height: 100vh;
        }

        .nav {
            background: linear-gradient(135deg, var(--mlpurple), var(--quiz-accent));
            color: white;
            padding: 8px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .nav-title { font-weight: 600; font-size: 14px; }
        .nav-links { display: flex; gap: 16px; }
        .nav-links a { color: white; text-decoration: none; font-size: 12px; opacity: 0.9; }
        .nav-links a:hover { opacity: 1; }

        .quiz-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 12px;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding: 0 4px;
        }
        .quiz-title { font-size: 16px; font-weight: 600; color: var(--mlpurple); }
        .quiz-stats {
            display: flex;
            gap: 12px;
            font-size: 12px;
        }
        .stat-badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-weight: 600;
        }
        .stat-progress { background: var(--quiz-light); color: var(--quiz-accent); }
        .stat-score { background: var(--correct-bg); color: var(--correct); }

        .progress-bar-container {
            height: 4px;
            background: var(--border);
            border-radius: 2px;
            margin-bottom: 12px;
        }
        .progress-bar {
            height: 100%;
            background: var(--quiz-accent);
            border-radius: 2px;
            transition: width 0.3s;
        }

        /* Three-column layout */
        .questions-row {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }

        .question-card {
            background: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            padding: 12px;
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
            min-height: 280px;
        }

        .question-card.answered { opacity: 0.7; }

        .question-card.correct-card {
            border: 2px solid var(--correct);
            background: linear-gradient(to bottom, var(--correct-bg), var(--card-bg));
        }

        .question-card.incorrect-card {
            border: 2px solid var(--incorrect);
            background: linear-gradient(to bottom, var(--incorrect-bg), var(--card-bg));
        }

        .q-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .q-number {
            background: var(--quiz-light);
            color: var(--quiz-accent);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 10px;
            font-weight: 600;
        }

        .q-status { font-size: 14px; }

        .q-text {
            font-size: 13px;
            font-weight: 500;
            margin-bottom: 10px;
            line-height: 1.4;
            flex-grow: 0;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 6px;
            flex-grow: 1;
        }

        .option-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 12px;
            min-height: 44px;
            border: 1px solid var(--border);
            border-radius: 6px;
            background: var(--card-bg);
            cursor: pointer;
            transition: all 0.15s;
            text-align: left;
            font-size: 12px;
        }

        .option-btn:hover:not(.disabled) {
            border-color: var(--quiz-accent);
            background: var(--quiz-light);
        }

        .option-btn.correct {
            border-color: var(--correct);
            background: var(--correct-bg);
        }

        .option-btn.incorrect {
            border-color: var(--incorrect);
            background: var(--incorrect-bg);
        }

        .option-btn.disabled { cursor: default; }

        .option-letter {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 10px;
            flex-shrink: 0;
        }

        .option-btn.correct .option-letter {
            background: var(--correct);
            color: white;
        }

        .option-btn.incorrect .option-letter {
            background: var(--incorrect);
            color: white;
        }

        .option-text { flex: 1; }

        .feedback {
            margin-top: 8px;
            padding: 8px;
            border-radius: 6px;
            font-size: 10px;
            line-height: 1.4;
            display: none;
        }

        .feedback.show { display: block; }
        .feedback.correct { background: var(--correct-bg); color: #166534; }
        .feedback.incorrect { background: var(--incorrect-bg); color: #991b1b; }

        /* Results */
        .results-card {
            background: var(--card-bg);
            border-radius: 10px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            padding: 32px;
            text-align: center;
            max-width: 500px;
            margin: 40px auto;
            display: none;
        }
        .results-card.show { display: block; }
        .results-icon { font-size: 48px; margin-bottom: 8px; }
        .results-score { font-size: 36px; font-weight: 700; color: var(--quiz-accent); }
        .results-label { font-size: 14px; color: var(--text-secondary); margin-bottom: 16px; }
        .results-grade {
            display: inline-block;
            padding: 6px 16px;
            border-radius: 16px;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 20px;
        }
        .grade-a { background: #dcfce7; color: #166534; }
        .grade-b { background: #dbeafe; color: #1e40af; }
        .grade-c { background: #fef3c7; color: #92400e; }
        .grade-d { background: #fed7aa; color: #9a3412; }
        .grade-f { background: #fee2e2; color: #991b1b; }

        .results-buttons { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }
        .btn {
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            border: none;
            text-decoration: none;
        }
        .btn-primary { background: var(--quiz-accent); color: white; }
        .btn-primary:hover { background: #0d9488; }
        .btn-secondary { background: var(--card-bg); color: var(--text); border: 1px solid var(--border); }

        /* Next button container */
        .next-btn-container {
            display: flex;
            justify-content: center;
            margin-top: 16px;
        }
        .btn-next {
            padding: 10px 32px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            background: var(--quiz-accent);
            color: white;
            transition: all 0.2s;
            display: none;
        }
        .btn-next:hover { background: #0d9488; transform: scale(1.02); }
        .btn-next.show { display: inline-block; }
        .btn-next:disabled { opacity: 0.5; cursor: not-allowed; }

        @media (max-width: 900px) {
            .questions-row { grid-template-columns: repeat(2, 1fr); }
        }
        @media (max-width: 600px) {
            .questions-row { grid-template-columns: 1fr; }
            .question-card { min-height: auto; }
        }
    </style>
</head>
<body>
    <nav class="nav">
        <div class="nav-title">Quiz: Platform Economics (Standalone Lecture)</div>
        <div class="nav-links">
            <a href="../index.html">Dashboard</a>
            <a href="../lectures/platform_economics.pdf">Lecture PDF</a>
            <a href="https://github.com/Digital-AI-Finance/Digital-Finance-Introduction" target="_blank">GitHub</a>
        </div>
    </nav>

    <main class="quiz-container">
        <div class="quiz-header">
            <div class="quiz-title">Platform Economics: 30-Question Comprehensive Quiz</div>
            <div class="quiz-stats">
                <span class="stat-badge stat-progress" id="progressBadge">0/30</span>
                <span class="stat-badge stat-score" id="scoreBadge">Score: 0</span>
            </div>
        </div>

        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar" style="width: 0%"></div>
        </div>

        <div class="questions-row" id="questionsRow"></div>

        <div class="next-btn-container">
            <button class="btn-next" id="nextBtn" onclick="loadNextQuestions()">Next</button>
        </div>

        <div class="results-card" id="resultsCard">
            <div class="results-icon" id="resultsIcon"></div>
            <div class="results-score" id="resultsScore"></div>
            <div class="results-label">Correct Answers</div>
            <div class="results-grade" id="resultsGrade"></div>
            <div class="results-buttons">
                <button class="btn btn-primary" onclick="restartQuiz()">Try Again</button>
                <a href="../index.html" class="btn btn-secondary">Dashboard</a>
            </div>
        </div>
    </main>

    <script>
        const quizData = {
            questions: [
                {
                    "id": 1,
                    "question": "A platform business differs from a pipeline business primarily because:",
                    "options": {
                        "A": "Platforms have more employees than pipelines",
                        "B": "Platforms create value by connecting participants who create value for each other",
                        "C": "Platforms always use more advanced technology",
                        "D": "Platforms produce higher-quality goods"
                    },
                    "correct": "B",
                    "explanation": "A platform creates value by facilitating direct interactions between two or more user groups, while a pipeline follows a linear make-and-sell model where the firm produces goods/services.",
                    "difficulty": "easy"
                },
                {
                    "id": 2,
                    "question": "Which of the following is NOT one of the four key characteristics of a platform?",
                    "options": {
                        "A": "Two or more distinct sides",
                        "B": "Interdependence between sides",
                        "C": "The platform manufactures a physical product",
                        "D": "Value created by participants, not the platform itself"
                    },
                    "correct": "C",
                    "explanation": "The four characteristics are: (1) two or more distinct sides, (2) interdependence between sides, (3) platform orchestrates interaction, and (4) value created by participants. Manufacturing a physical product is a pipeline characteristic.",
                    "difficulty": "easy"
                },
                {
                    "id": 3,
                    "question": "In a platform's growth pattern, adding more users leads to:",
                    "options": {
                        "A": "Linear increase in output, similar to a factory",
                        "B": "Non-linear increase in value per user",
                        "C": "Decrease in value due to congestion",
                        "D": "No change in value for existing users"
                    },
                    "correct": "B",
                    "explanation": "Platforms exhibit non-linear growth: more users create more value per user because each new user can interact with every existing user. This contrasts with pipeline businesses where growth is linear.",
                    "difficulty": "easy"
                },
                {
                    "id": 4,
                    "question": "According to Rochet and Tirole (2003), a market is two-sided because:",
                    "options": {
                        "A": "It has exactly two customer groups",
                        "B": "The platform can affect transaction volume by shifting prices between sides",
                        "C": "Both sides pay the same price",
                        "D": "The market has both buyers and sellers"
                    },
                    "correct": "B",
                    "explanation": "Rochet and Tirole formalized that a market is two-sided not simply because it has two groups, but because the platform can affect the volume of transactions by charging more to one side and reducing the charge to the other. Price structure matters, not just price level.",
                    "difficulty": "medium"
                },
                {
                    "id": 5,
                    "question": "A peer-to-peer payment app becomes more valuable as more of your friends join. This is an example of:",
                    "options": {
                        "A": "Indirect network effects",
                        "B": "Data network effects",
                        "C": "Direct network effects",
                        "D": "Negative network effects"
                    },
                    "correct": "C",
                    "explanation": "Direct (same-side) network effects occur when more users on the same side increase value for other users on that same side. More friends on the payment app means more people you can pay directly.",
                    "difficulty": "easy"
                },
                {
                    "id": 6,
                    "question": "More cardholders joining a card network makes merchants more likely to accept the card. This illustrates:",
                    "options": {
                        "A": "Direct network effects",
                        "B": "Indirect (cross-side) network effects",
                        "C": "Data network effects",
                        "D": "Economies of scale"
                    },
                    "correct": "B",
                    "explanation": "Indirect (cross-side) network effects occur when more users on Side A (cardholders) increase value for Side B (merchants). The value increase crosses from one side of the platform to the other.",
                    "difficulty": "easy"
                },
                {
                    "id": 7,
                    "question": "A lending platform improves its risk models as more loan applications are processed. This is best described as:",
                    "options": {
                        "A": "Direct network effects",
                        "B": "Negative network effects",
                        "C": "Data network effects",
                        "D": "Economies of scale"
                    },
                    "correct": "C",
                    "explanation": "Data network effects occur when more usage generates more data, which improves algorithms, which improves the product. A lending platform processing more applications builds better risk models through accumulated data.",
                    "difficulty": "easy"
                },
                {
                    "id": 8,
                    "question": "A marketplace grows rapidly but quality declines as unvetted providers flood the platform. This illustrates:",
                    "options": {
                        "A": "Critical mass",
                        "B": "Positive network effects",
                        "C": "Platform envelopment",
                        "D": "Negative network effects"
                    },
                    "correct": "D",
                    "explanation": "Negative network effects occur when more users reduce value for other users. Congestion, spam, and fraud from rapid uncontrolled growth can turn a positive network effect into a negative one, creating a vicious cycle.",
                    "difficulty": "easy"
                },
                {
                    "id": 9,
                    "question": "What distinguishes network effects from economies of scale?",
                    "options": {
                        "A": "Network effects reduce costs; economies of scale increase demand",
                        "B": "Network effects increase demand (value per user); economies of scale reduce costs (cost per unit)",
                        "C": "They are the same concept with different names",
                        "D": "Economies of scale benefit users; network effects benefit the firm"
                    },
                    "correct": "B",
                    "explanation": "Network effects are a demand-side advantage (more users = more value per user, benefiting all participants). Economies of scale are a cost-side advantage (more production = lower unit cost, benefiting the firm). Both create barriers to entry but through different mechanisms.",
                    "difficulty": "medium"
                },
                {
                    "id": 10,
                    "question": "Critical mass in platform economics refers to:",
                    "options": {
                        "A": "The maximum number of users a platform can support",
                        "B": "The minimum number of users needed for the platform to become self-sustaining",
                        "C": "The point where the platform becomes profitable",
                        "D": "The total market size available to the platform"
                    },
                    "correct": "B",
                    "explanation": "Critical mass is the minimum number of users needed for a platform to become self-sustaining, where organic growth exceeds churn without subsidies. Below critical mass, users leave faster than they join.",
                    "difficulty": "easy"
                },
                {
                    "id": 11,
                    "question": "Which three conditions must ALL be present for a market to 'tip' to winner-take-most?",
                    "options": {
                        "A": "Low prices, good technology, strong brand",
                        "B": "Strong network effects, high switching costs, low multi-homing",
                        "C": "Government regulation, venture capital, first-mover advantage",
                        "D": "Large user base, low costs, global reach"
                    },
                    "correct": "B",
                    "explanation": "Three conditions for market tipping: (1) strong network effects where each new user significantly increases value, (2) high switching costs making it costly to leave, and (3) low multi-homing making it difficult to use multiple platforms simultaneously.",
                    "difficulty": "medium"
                },
                {
                    "id": 12,
                    "question": "Multi-homing means:",
                    "options": {
                        "A": "A platform operating in multiple countries",
                        "B": "Users accessing a platform from multiple devices",
                        "C": "Users simultaneously using multiple competing platforms",
                        "D": "A platform offering multiple product categories"
                    },
                    "correct": "C",
                    "explanation": "Multi-homing means using multiple competing platforms simultaneously (e.g., drivers using both ride-sharing apps). When multi-homing is easy, competition persists and no single winner emerges; when difficult, markets tip to dominance.",
                    "difficulty": "easy"
                },
                {
                    "id": 13,
                    "question": "Which launch strategy involves making the product useful even without a network?",
                    "options": {
                        "A": "Subsidize one side",
                        "B": "Single-player mode",
                        "C": "Piggyback on existing network",
                        "D": "Marquee user strategy"
                    },
                    "correct": "B",
                    "explanation": "Single-player mode means making the product useful without a network first (e.g., an expense tracker that later becomes social). This solves the chicken-and-egg problem by providing standalone value before requiring network participation.",
                    "difficulty": "easy"
                },
                {
                    "id": 14,
                    "question": "The chicken-and-egg problem in platform economics refers to:",
                    "options": {
                        "A": "The difficulty of scaling technology infrastructure",
                        "B": "Each side needing the other to exist first before joining",
                        "C": "The challenge of hiring employees for a startup",
                        "D": "Competition between two equally matched platforms"
                    },
                    "correct": "B",
                    "explanation": "The chicken-and-egg problem is the fundamental launch challenge: without sellers, buyers see no value and leave; without buyers, sellers see no demand and leave. The platform must break this cycle to survive.",
                    "difficulty": "easy"
                },
                {
                    "id": 15,
                    "question": "In two-sided platform pricing, the Rochet-Tirole insight states that the optimal price structure depends on:",
                    "options": {
                        "A": "The cost of serving each side equally",
                        "B": "The relative demand elasticities of each side",
                        "C": "The total number of users on both sides combined",
                        "D": "Government-mandated price controls"
                    },
                    "correct": "B",
                    "explanation": "Rochet and Tirole showed that optimal pricing depends on relative demand elasticities, not cost allocation. The more price-sensitive side should be subsidized; the side that captures more value per user on the other side should be charged.",
                    "difficulty": "medium"
                },
                {
                    "id": 16,
                    "question": "Platform envelopment means:",
                    "options": {
                        "A": "A platform wrapping its product in better packaging",
                        "B": "Entering a rival's market by bundling the rival's functionality into your own platform",
                        "C": "A platform encrypting its user data for security",
                        "D": "Reducing the number of features to focus on core competency"
                    },
                    "correct": "B",
                    "explanation": "Platform envelopment occurs when a platform in Market A extends into Market B by adding Market B's features. Shared users and data lower marginal cost of entry, making it hard for standalone Market B platforms to compete against the bundled offering.",
                    "difficulty": "medium"
                },
                {
                    "id": 17,
                    "question": "The 'take rate' or 'rake' in platform economics is:",
                    "options": {
                        "A": "The speed at which the platform acquires new users",
                        "B": "The percentage the platform keeps from each transaction",
                        "C": "The rate at which users leave the platform",
                        "D": "The interest rate earned on customer deposits"
                    },
                    "correct": "B",
                    "explanation": "The take rate (rake) is the percentage the platform keeps from each transaction. This is the single most important metric for a transaction platform. Even small changes have enormous impact at scale.",
                    "difficulty": "easy"
                },
                {
                    "id": 18,
                    "question": "A FinTech app offers free basic accounts but charges for premium features. This is a:",
                    "options": {
                        "A": "Commission model",
                        "B": "Advertising model",
                        "C": "Freemium model",
                        "D": "Float income model"
                    },
                    "correct": "C",
                    "explanation": "Freemium combines a free basic tier with paid premium features. A large free user base converts at typically 2-5% to paid. The challenge is that free users cost money to serve, so the conversion rate must justify serving non-paying users.",
                    "difficulty": "easy"
                },
                {
                    "id": 19,
                    "question": "Payment for Order Flow (PFOF) is a revenue model where:",
                    "options": {
                        "A": "Users pay a subscription to access trading features",
                        "B": "The broker routes retail orders to market makers who pay for that flow",
                        "C": "The platform charges merchants a percentage of each sale",
                        "D": "Interest is earned on customer deposits held in transit"
                    },
                    "correct": "B",
                    "explanation": "In PFOF, retail investors pay zero commissions, but the broker routes their orders to market makers who pay for the order flow. Critics argue this creates hidden costs in execution quality and a conflict of interest for the broker.",
                    "difficulty": "medium"
                },
                {
                    "id": 20,
                    "question": "Float income refers to:",
                    "options": {
                        "A": "Revenue from advertising displayed to users",
                        "B": "Interest earned on funds held temporarily between receipt and disbursement",
                        "C": "The commission charged on currency exchange",
                        "D": "Revenue from premium subscription tiers"
                    },
                    "correct": "B",
                    "explanation": "Float is money held temporarily by a platform between receipt and disbursement. The platform earns interest on these funds. This is particularly valuable in high-interest-rate environments and is often an overlooked but substantial revenue source.",
                    "difficulty": "medium"
                },
                {
                    "id": 21,
                    "question": "A healthy LTV/CAC ratio for a platform business is generally considered to be:",
                    "options": {
                        "A": "Greater than 1:1",
                        "B": "Greater than 3:1",
                        "C": "Exactly 1:1",
                        "D": "Less than 1:1 during the growth phase"
                    },
                    "correct": "B",
                    "explanation": "LTV should be several times CAC, with a ratio of 3:1 or higher considered healthy. Payback period should be under 18 months for consumer and under 24 months for enterprise. Churn should be below 5% monthly for consumer.",
                    "difficulty": "medium"
                },
                {
                    "id": 22,
                    "question": "The blitzscaling playbook involves all of the following EXCEPT:",
                    "options": {
                        "A": "Raise massive capital from venture investors",
                        "B": "Subsidize below cost to attract users rapidly",
                        "C": "Achieve profitability before reaching critical mass",
                        "D": "Turn off subsidies and monetize the network once dominant"
                    },
                    "correct": "C",
                    "explanation": "Blitzscaling deliberately sacrifices profitability for speed: raise capital, subsidize to grow fast, reach critical mass before competitors, then monetize. Achieving profitability before critical mass contradicts the entire strategy.",
                    "difficulty": "medium"
                },
                {
                    "id": 23,
                    "question": "The data flywheel creates a competitive barrier because:",
                    "options": {
                        "A": "Data storage costs decrease over time",
                        "B": "New entrants cannot replicate years of accumulated compounding data advantage",
                        "C": "Regulations prevent data sharing between competitors",
                        "D": "Users prefer platforms with larger databases"
                    },
                    "correct": "B",
                    "explanation": "The data flywheel (more users -> more data -> better algorithms -> better experience -> more users) compounds over years. New entrants start with zero data while incumbents have years of compounding advantage, making the moat nearly impossible to replicate.",
                    "difficulty": "medium"
                },
                {
                    "id": 24,
                    "question": "Which governance model involves rules encoded in smart contracts?",
                    "options": {
                        "A": "Centralized governance",
                        "B": "Community governance (DAOs)",
                        "C": "Algorithmic governance",
                        "D": "Regulatory governance"
                    },
                    "correct": "C",
                    "explanation": "Algorithmic governance encodes rules in code (smart contracts). This provides consistency and transparency but lacks flexibility. Centralized governance uses unilateral platform rules, while community governance uses user voting (DAOs).",
                    "difficulty": "medium"
                },
                {
                    "id": 25,
                    "question": "The 'regulator's dilemma' regarding platforms is:",
                    "options": {
                        "A": "Whether to regulate domestic or international platforms",
                        "B": "Regulate too early and stifle innovation; regulate too late and face entrenched power",
                        "C": "Whether platforms should pay more taxes",
                        "D": "How to hire enough staff to monitor all platforms"
                    },
                    "correct": "B",
                    "explanation": "The regulator's dilemma: regulate too early and you stifle innovation, preventing beneficial platforms from emerging. Regulate too late and you face entrenched power that is very difficult to dislodge.",
                    "difficulty": "medium"
                },
                {
                    "id": 26,
                    "question": "How can regulation paradoxically help established platforms?",
                    "options": {
                        "A": "By giving them government subsidies",
                        "B": "By raising compliance barriers that new entrants cannot easily afford",
                        "C": "By reducing their tax obligations",
                        "D": "By mandating that users stay on the platform"
                    },
                    "correct": "B",
                    "explanation": "Compliance costs (banking charters, KYC/AML infrastructure, licensing) are expensive to build. Established players have already invested, while new entrants must start from scratch. Regulation intended to protect consumers can paradoxically protect incumbents.",
                    "difficulty": "hard"
                },
                {
                    "id": 27,
                    "question": "The platform 'death spiral' occurs when:",
                    "options": {
                        "A": "The platform's technology becomes outdated",
                        "B": "Losing users on one side reduces value for the other side, causing them to leave too",
                        "C": "The platform runs out of venture funding",
                        "D": "A competitor launches a better product"
                    },
                    "correct": "B",
                    "explanation": "The death spiral is the reverse of positive network effects: losing users on one side reduces value for the other side, causing them to leave, which further reduces value, accelerating collapse. Network effects work powerfully in both directions.",
                    "difficulty": "medium"
                },
                {
                    "id": 28,
                    "question": "In the case of ride-sharing subsidy wars, blitzscaling failed because:",
                    "options": {
                        "A": "The technology was inferior to taxis",
                        "B": "Government regulations shut both platforms down",
                        "C": "Easy multi-homing prevented market tipping, so subsidies bought temporary volume, not a permanent moat",
                        "D": "Neither platform could raise sufficient capital"
                    },
                    "correct": "C",
                    "explanation": "Both platforms subsidized heavily, but users multi-homed freely (drivers ran both apps, riders checked both). Neither achieved winner-take-most because multi-homing prevented tipping. When prices rose, much demand proved artificial.",
                    "difficulty": "hard"
                },
                {
                    "id": 29,
                    "question": "In decentralized platforms, tokens are used to solve the chicken-and-egg problem by:",
                    "options": {
                        "A": "Replacing traditional currency",
                        "B": "Rewarding early users with ownership stakes, giving them both usage value and financial incentive",
                        "C": "Making the platform completely free to use",
                        "D": "Preventing competitors from launching similar platforms"
                    },
                    "correct": "B",
                    "explanation": "Tokens given to early users act like equity for early employees: they provide both a usage incentive and financial alignment. Token holders benefit when the protocol succeeds, combining network effects with financial incentive to bootstrap participation.",
                    "difficulty": "hard"
                },
                {
                    "id": 30,
                    "question": "The six-question framework for evaluating a FinTech platform asks all of the following EXCEPT:",
                    "options": {
                        "A": "Does it have real network effects, or just subsidized growth?",
                        "B": "Are switching costs high enough to retain users at sustainable prices?",
                        "C": "How many venture funding rounds has the company completed?",
                        "D": "Can incumbents easily copy this?"
                    },
                    "correct": "C",
                    "explanation": "The six evaluation questions are: (1) real network effects? (2) healthy unit economics? (3) high switching costs? (4) compounding data advantage? (5) can incumbents copy? (6) will regulation help or hurt? Funding rounds indicate capital raised, not business sustainability.",
                    "difficulty": "hard"
                }
            ]
        };

        const state = {
            currentIndex: 0,
            answers: {},
            score: 0,
            displayedQuestions: [],
            pendingSlots: []
        };

        const questionsRow = document.getElementById('questionsRow');
        const progressBar = document.getElementById('progressBar');
        const progressBadge = document.getElementById('progressBadge');
        const scoreBadge = document.getElementById('scoreBadge');
        const resultsCard = document.getElementById('resultsCard');
        const nextBtn = document.getElementById('nextBtn');

        function initQuiz() {
            state.currentIndex = 0;
            state.answers = {};
            state.score = 0;
            state.displayedQuestions = [];
            state.pendingSlots = [];

            resultsCard.classList.remove('show');
            questionsRow.style.display = 'grid';
            nextBtn.classList.remove('show');

            // Show first 3 questions
            for (let i = 0; i < 3 && i < quizData.questions.length; i++) {
                state.displayedQuestions.push(i);
            }
            state.currentIndex = Math.min(3, quizData.questions.length);

            renderQuestions();
            updateStats();
        }

        function renderQuestions() {
            questionsRow.innerHTML = '';

            state.displayedQuestions.forEach((qIdx, slot) => {
                const q = quizData.questions[qIdx];
                const answered = state.answers[q.id] !== undefined;
                const isCorrect = answered && state.answers[q.id] === q.correct;
                const isIncorrect = answered && state.answers[q.id] !== q.correct;

                const card = document.createElement('div');
                card.className = 'question-card';
                if (isCorrect) card.classList.add('correct-card', 'answered');
                if (isIncorrect) card.classList.add('incorrect-card', 'answered');

                card.innerHTML = `
                    <div class="q-header">
                        <span class="q-number">Q${qIdx + 1}</span>
                        ${answered ? `<span class="q-status">${isCorrect ? '&#10004;' : '&#10008;'}</span>` : ''}
                    </div>
                    <div class="q-text">${q.question}</div>
                    <div class="options" data-qid="${q.id}" data-slot="${slot}">
                        ${['A','B','C','D'].map(letter => {
                            let optClass = 'option-btn';
                            if (answered) {
                                optClass += ' disabled';
                                if (letter === q.correct) optClass += ' correct';
                                else if (letter === state.answers[q.id]) optClass += ' incorrect';
                            }
                            return `
                                <button class="${optClass}" data-letter="${letter}" ${answered ? 'disabled' : ''}>
                                    <span class="option-letter">${letter}</span>
                                    <span class="option-text">${q.options[letter]}</span>
                                </button>
                            `;
                        }).join('')}
                    </div>
                    <div class="feedback ${answered ? 'show' : ''} ${isCorrect ? 'correct' : 'incorrect'}">
                        ${answered ? (isCorrect ? '&#10004; ' : `&#10008; Answer: ${q.correct}. `) + q.explanation : ''}
                    </div>
                `;

                // Add click handlers
                if (!answered) {
                    card.querySelectorAll('.option-btn').forEach(btn => {
                        btn.addEventListener('click', () => handleAnswer(qIdx, slot, btn.dataset.letter));
                    });
                }

                questionsRow.appendChild(card);
            });

            renderMath();
        }

        function handleAnswer(qIdx, slot, letter) {
            const q = quizData.questions[qIdx];
            state.answers[q.id] = letter;

            if (letter === q.correct) state.score++;

            // Track this slot as pending replacement
            if (!state.pendingSlots.includes(slot)) {
                state.pendingSlots.push(slot);
            }

            updateStats();
            renderQuestions();

            // Check if all questions answered
            const answered = Object.keys(state.answers).length;
            if (answered >= quizData.questions.length) {
                // Short delay then show results
                setTimeout(showResults, 800);
            } else if (state.currentIndex < quizData.questions.length && state.pendingSlots.length > 0) {
                // Show Next button if there are more questions and pending slots
                nextBtn.classList.add('show');
            }
        }

        function loadNextQuestions() {
            // Replace pending slots with new questions
            while (state.pendingSlots.length > 0 && state.currentIndex < quizData.questions.length) {
                const slot = state.pendingSlots.shift();
                state.displayedQuestions[slot] = state.currentIndex;
                state.currentIndex++;
            }

            // Hide Next button
            nextBtn.classList.remove('show');

            renderQuestions();

            // Check if quiz is complete (all displayed questions answered)
            const answered = Object.keys(state.answers).length;
            if (answered >= quizData.questions.length) {
                setTimeout(showResults, 500);
            }
        }

        function updateStats() {
            const answered = Object.keys(state.answers).length;
            const total = quizData.questions.length;

            progressBar.style.width = `${(answered / total) * 100}%`;
            progressBadge.textContent = `${answered}/${total}`;
            scoreBadge.textContent = `Score: ${state.score}`;
        }

        function showResults() {
            questionsRow.style.display = 'none';
            nextBtn.classList.remove('show');
            resultsCard.classList.add('show');

            const total = quizData.questions.length;
            const percentage = Math.round((state.score / total) * 100);

            document.getElementById('resultsScore').textContent = `${state.score}/${total}`;

            let grade, gradeClass, icon;
            if (percentage >= 90) { grade = 'Excellent! A'; gradeClass = 'grade-a'; icon = '&#127942;'; }
            else if (percentage >= 80) { grade = 'Great! B'; gradeClass = 'grade-b'; icon = '&#11088;'; }
            else if (percentage >= 70) { grade = 'Good! C'; gradeClass = 'grade-c'; icon = '&#128077;'; }
            else if (percentage >= 60) { grade = 'Pass - D'; gradeClass = 'grade-d'; icon = '&#128221;'; }
            else { grade = 'Keep practicing'; gradeClass = 'grade-f'; icon = '&#128218;'; }

            document.getElementById('resultsIcon').innerHTML = icon;
            const gradeEl = document.getElementById('resultsGrade');
            gradeEl.textContent = `${grade} (${percentage}%)`;
            gradeEl.className = `results-grade ${gradeClass}`;
        }

        function restartQuiz() {
            initQuiz();
        }

        function renderMath() {
            if (typeof renderMathInElement !== 'undefined') {
                renderMathInElement(document.body, {
                    delimiters: [
                        {left: '$$', right: '$$', display: true},
                        {left: '$', right: '$', display: false}
                    ],
                    throwOnError: false
                });
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            initQuiz();
            setTimeout(renderMath, 100);
        });
    </script>
</body>
</html>
